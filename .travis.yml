sudo: true
dist: xenial
language: python
python:
- '3.6'
- '3.7'
git:
  depth: false
env:
- MPLBACKEND=Agg
cache: pip
install:
- wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- hash -r
- conda config --set always_yes yes --set changeps1 no
- conda update -q conda
- conda create -q -n test-environment python=$TRAVIS_PYTHON_VERSION
- source activate test-environment
- pip install -r docs/requirements.txt
- pip install --upgrade pytest flake8 sphinx
- pip install .
script: cd docs && make doctest
deploy:
  provider: pypi
  user: jshenk
  skip_cleanup: true
  on:
    tags: true
    branch: master
  password:
    secure: iNAsNIOG/JmY4y3Is7DgFVevcjUr/nvQ831tc9BuWZV7FwGI2Rav6G2BPjEkYY+aSwM26sEDNza7szyVpqCE+3W8wHXmMmb63XE2i26LU3tjh/x+JPkCTLUs32nh4sZhn3xBGHNNvdtbR2smSh6Ch+To4kcjerVApUPgUbSltG/ATgp6HLnggsqMMbQFOy80Oqb7J6iIHP/OZjoK/cGb+ptxUg2O6PAdawoUDkU3LB/kNnAH9yS3vCF5JMHhTj9j/dQItGrug6qguXwNHsBUye1c5lTMUG0N2HAB8C91x/yQOn8n2IGGhvN2RFgTtkzzwHgqI/14DdaxfzqHdp7yEjZ323A+anSNcntrp1MnNicckvEEaPY0sbUjuhWKkPyVbHWBYqgkGdvzQ7halb3gcjg/BFmjU+whh4qLtdmu311HlWQONF0XvOuD1wiwHdNIIXBwwgIbWjArCxjsGaDwCTwJq+gUTUebFmgh1XPrNnlGM26RSr5MCiXgWNPmQyYTadh5AqXjQ2WvSULd4FxTCUu5x/yiCzg/RpdCJRbXCV5LFmmpNrWFhoZ2JBKzFBuYD6Eu009SpWNFzR7B8pLRX+LPRMaQbajiWhrTBwBELcajHOAQ65eOf/KaSojKqecvAcsBJle+d1owqSpOX6A5mQouAJFTr+IIOcYhDbogZ8k=
